{% extends 'base.html' %}

{% block title %}Ultrasound Examination Details{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-4">
        <div class="col">
            <h2>Ultrasound Examination Report</h2>
        </div>
        <div class="col text-end">
            {% if not exam.bill %}
            <a href="{% url 'billing:create_bill' exam.pk %}" class="btn btn-success me-2">
                <i class="fas fa-file-invoice-dollar me-2"></i>Create Bill
            </a>
            {% else %}
            <a href="{% url 'billing:bill_detail' exam.bill.bill_number %}" class="btn btn-info me-2">
                <i class="fas fa-file-invoice-dollar me-2"></i>View Bill
            </a>
            {% endif %}
            <a href="{% url 'download-ultrasound-docx' exam.pk %}" class="btn btn-primary me-2">
                <i class="fas fa-download me-2"></i>Download DOCX
            </a>
            <a href="{% url 'exam-update' exam.pk %}" class="btn btn-warning me-2">
                <i class="fas fa-edit me-2"></i>Edit Exam
            </a>
            <a href="{% url 'patient-detail' exam.patient.pk %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left me-2"></i>Back to Patient
            </a>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <pre style="font-family: 'Courier New', Courier, monospace; font-size: 12pt; border: none; background: none; margin: 0; padding: 0;">CASE NUMBER	  :      {{ exam.case_number|default:"22- 205" }}		            DATE:  {{ exam.exam_date|date:"F d, Y"|default:"JANUARY 4, 2023"|upper }}
NAME OF PATIENT	:      {{ exam.patient.last_name }}, {{ exam.patient.first_name }}
AGE	             		:       {{ exam.patient.age|default:"29" }}
GENDER	               :     {{ exam.patient.get_sex_display|default:"FEMALE" }}
MARITAL STATUS             :     {{ exam.patient.marital_status|default:"" }}
EXAMINATION PERFORMED:                       		{{ exam.procedure_type.name|default:"PELVIC" }}	 ULTRASOUND         
		              O.R.				             AMOUNT PAID:
REQUESTING PHYSICIAN:					WARD:    {{ exam.patient.get_patient_status_display|default:"OPD" }}
											      
RADIOLOGICAL FINDINGS:

{{ exam.findings|default:"" }}

IMPRESSION:

{{ exam.impression|default:"" }}</pre>
        </div>
    </div>
</div>

<style>
@media print {
    .btn, .container > .row:first-child {
        display: none !important;
    }
    .card {
        border: none;
        box-shadow: none;
    }
    pre {
        margin: 0;
        padding: 0;
    }
}
</style>
{% endblock %} 